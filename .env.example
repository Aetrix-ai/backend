#############################
# Aetrix Backend - Environment Configuration
# Copy this file to `.env` and update with your actual values
# NEVER commit your real `.env` file to version control
#############################

#############################
# Application Settings
#############################
# Environment mode: development | production
NODE_ENV=development

# Port the server listens on
PORT=3000

#############################
# Database Configuration
#############################
# PostgreSQL connection string for Prisma
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
# 
# For local Docker Compose database (see docker-compose.yml):
DATABASE_URL=postgresql://aetrix:aetrix_password@localhost:5432/aetrix_db_dev?schema=public
#
# For production, use a secure connection string:
# DATABASE_URL=postgresql://prod_user:secure_password@prod-host:5432/prod_db?schema=public&sslmode=require

#############################
# Authentication & Security
#############################
# JWT secrets - MUST be strong random strings in production
# Generate with: openssl rand -base64 32
USER_JWT_SECRET=replace_with_a_strong_random_value_for_user_jwt_min_32_chars
ADMIN_JWT_SECRET=replace_with_a_strong_random_value_for_admin_jwt_min_32_chars

# bcrypt salt rounds for password hashing
# Recommended: 10 for production, 8 for development
BCRYPT_SALT_ROUNDS=10

#############################
# AI Provider Configuration
#############################
# OpenAI API key - Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# AI provider name (currently supports: openai)
AI_PROVIDER=openai

# Model sampling temperature (0.0 = deterministic, 1.0 = creative)
# Recommended: 0.7 for balanced output
AI_TEMPERATURE=0.7

# Maximum tokens to request from AI provider
# Adjust based on your use case and budget
AI_MAX_TOKENS=1500

#############################
# ImageKit Configuration
#############################
# ImageKit credentials for media storage
# Get from: https://imagekit.io/dashboard/developer/api-keys
IMAGEKIT_PUBLIC_KEY=public_xxxxxxxxxxxxxxxxxxxxxx
IMAGEKIT_PRIVATE_KEY=private_xxxxxxxxxxxxxxxxxxxxxx
IMAGEKIT_URL_ENDPOINT=https://ik.imagekit.io/your_imagekit_id

#############################
# GitHub Integration (Optional)
#############################
# GitHub Personal Access Token for repository management
# Create at: https://github.com/settings/tokens
# Required scopes: repo, workflow
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Default GitHub repository owner/organization
GITHUB_OWNER=your-github-username

#############################
# Redis Configuration (Optional)
#############################
# Upstash Redis for rate limiting and caching
# Get from: https://console.upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_redis_token_here

#############################
# Admin Initialization
#############################
# Set to "true" to create an initial superadmin on first startup
# IMPORTANT: Set to "false" after first run for security
INIT_ADMIN=false

# Initial superadmin credentials (only used if INIT_ADMIN=true)
# Use a strong password and change it immediately after first login
SUPERADMIN_EMAIL=admin@example.com
SUPERADMIN_PASSWORD=ChangeMe123!SecurePassword

#############################
# Logging Configuration
#############################
# Pino log level: trace | debug | info | warn | error | fatal
# Recommended: info for production, debug for development
LOG_LEVEL=info

#############################
# E2B Code Execution (Optional)
#############################
# E2B API key for sandboxed code execution
# Get from: https://e2b.dev/dashboard
E2B_API_KEY=e2b_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

#############################
# Vercel Integration (Optional)
#############################
# Vercel API token for deployment automation
# Create at: https://vercel.com/account/tokens
VERCEL_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
VERCEL_TEAM_ID=team_xxxxxxxxxxxxxxxxxxxxxx

#############################
# CORS Configuration
#############################
# Allowed origins for CORS (comma-separated)
# In production, specify your frontend domain(s)
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

#############################
# Rate Limiting
#############################
# Maximum requests per window (requires Redis)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

#############################
# PRODUCTION CHECKLIST
#############################
# Before deploying to production, ensure:
# ✓ NODE_ENV=production
# ✓ Strong, unique JWT secrets (32+ characters)
# ✓ Secure DATABASE_URL with SSL enabled
# ✓ Valid OPENAI_API_KEY with sufficient credits
# ✓ IMAGEKIT credentials configured
# ✓ INIT_ADMIN=false (after initial setup)
# ✓ LOG_LEVEL=info or warn
# ✓ CORS_ORIGIN set to your actual frontend domain
# ✓ All secrets stored in secure environment (not in code)
# ✓ Database backups configured
# ✓ Monitoring and alerting set up

#############################
# SECURITY NOTES
#############################
# 1. Never commit this file with real values to version control
# 2. Use environment-specific secret management in production
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use different secrets for development and production
# 5. Enable database SSL in production
# 6. Implement rate limiting for public endpoints
# 7. Keep dependencies updated for security patches
# 8. Use HTTPS in production (configure reverse proxy)
# 9. Monitor logs for suspicious activity
# 10. Implement proper backup and disaster recovery

#############################
# QUICK START GUIDE
#############################
# 1. Copy this file: cp .env.example .env
# 2. Update DATABASE_URL (or use docker-compose up -d)
# 3. Set strong JWT secrets (use: openssl rand -base64 32)
# 4. Add your OPENAI_API_KEY
# 5. Configure ImageKit credentials
# 6. Run: npm install
# 7. Run: npx prisma migrate dev
# 8. Run: npm run dev
# 9. Server starts at http://localhost:3000

#############################
# DOCKER COMPOSE DATABASE
#############################
# The included docker-compose.yml provides PostgreSQL:
# - User: aetrix
# - Password: aetrix_password
# - Database: aetrix_db_dev
# - Port: 5432
# - Connection: postgresql://aetrix:aetrix_password@localhost:5432/aetrix_db_dev?schema=public
#
# Start with: docker-compose up -d
# Stop with: docker-compose down
# View logs: docker-compose logs database

#############################
# TROUBLESHOOTING
#############################
# Database connection fails:
#   - Check PostgreSQL is running: docker-compose ps
#   - Verify DATABASE_URL format
#   - Ensure port 5432 is not in use
#
# JWT errors:
#   - Ensure secrets are at least 32 characters
#   - Check for special characters that need escaping
#
# AI generation fails:
#   - Verify OPENAI_API_KEY is valid
#   - Check API quota and billing
#   - Review LOG_LEVEL=debug for detailed errors
#
# Media upload fails:
#   - Verify ImageKit credentials
#   - Check IMAGEKIT_URL_ENDPOINT format
#   - Ensure public/private keys match

#############################
# SUPPORT & DOCUMENTATION
#############################
# Full documentation: See README.md
# Issues: https://github.com/Aetrix-ai/backend/issues
# API Reference: See /docs endpoint (when implemented)
